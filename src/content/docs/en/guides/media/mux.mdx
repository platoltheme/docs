---
title: Mux & Astro
description: Add high performance video to your Astro project using Mux
sidebar:
  label: Mux
type: media
service: mux
stub: true
i18nReady: true
---

import { Tabs, TabItem } from '@astrojs/starlight/components';
import ReadMore from '~/components/ReadMore.astro';

[Mux](https://mux.com) is a hosted media service that provides video streaming infrastructure and performance analytics for businesses of all scale.

When you use Mux to store and host your video content, you'll have access to Astro-native video components for [Mux Player](https://www.mux.com/docs/guides/mux-player-web), a drop in component for adding Mux videos in your Astro project, and [Mux Uploader](https://www.mux.com/docs/guides/mux-uploader) for uploading videos to Mux from your website. These components integrate seamlessly with [Mux Data](https://www.mux.com/docs/guides/data) to track your video engagement and performance.

:::tip
Learn more about features such as embedding, storing, streaming, and customizing video at [Mux's dedicated page for video in Astro](https://www.mux.com/video-for/astro)!
:::

## Using Mux in Astro

Mux's APIs and web components work in Astro to compress and optimize your videos and streams for the web, adapt the quality of your video to network conditions, and integrate additional features like captions, thumbnails, and analytics. The [Mux Node SDK](https://github.com/muxinc/mux-node-sdk) supports both Mux Data and Mux Video.

## Prerequisites

- An existing Astro project with an adapter installed for [on-demand server rendering](/en/guides/on-demand-rendering/). If you don’t have an Astro project yet, our [Installation guide](https://docs.astro.build/en/install-and-setup/) will get you up and running in no time.
- A Mux account. If you don’t have an account, you can [sign up with Mux](https://dashboard.mux.com/login) for a free account.

## Mux Player

In Astro, you can use the full-featured [Mux Player](https://www.mux.com/docs/guides/mux-player-web) as a native Astro comonent for optimized, responsive video playback and live streams. Mux Player has built-in support for Mux Data analytics, and will automatically show visitor engagement and video quality metrics in your dashboard once your video has views on your deployed site.

Mux Player provides a responsive UI based on video player dimensions and stream type, automatic thumbnail previews and poster images, and modern video player capabilities (e.g. fullscreen, picture-in-picture, Chromecast, AirPlay).

### Installation

Install the Astro version of Mux Player using your preferred package manager:

<Tabs>
<TabItem label="npm">
  ```shell
  npm install @mux/mux-player-astro@latest
  ```
  </TabItem>
  <TabItem label="Yarn">
  ```shell
  yarn add @mux/mux-player-astro@latest
  ```
  </TabItem>
</Tabs>

Mux Player can also be used in your Astro project as:
- a web component (`<mux-player>` from `@mux/mux-player` )
- a React component (`<MuxPlayer />` from `@mux/mux-player-react`)
- an HTML web embed (`<iframe>`)

### `<MuxPlayer />` component

Import and use the native `<MuxPlayer />` Astro component directly in your `.astro` files like any other Astro component. 

You will need the `playbackId` for your asset which can be found in your Mux dashboard or [retrieved from its `ASSET_ID`](#retrieving-asset-data). 

All other [options to control the Mux web player](https://www.mux.com/docs/guides/player-api-reference/) (e.g. hide or display controls, style elements, disable cookies) are optional:

```astro title="src/components/StarlightVideo.astro"
<MuxPlayer
  playbackId="FOTbeIxKeMPzyhrob722wytaTGI02Y3zbV00NeFQbTbK00"
  metadata={{
    video_title: 'Starlight by Astro',
  }}
  style={{
    display: 'block',
    aspectRatio: '16/9',
    backgroundColor: '#000',
    margin: '1rem 0 2rem',
  }}
  primaryColor="#f2ec3a"
  secondaryColor="#0caa09"
  accentColor="#6e1e99"
  defaultShowRemainingTime={true}
/>
```

If your `playbackId` belongs to a live stream instead of a prerecorded video on demand, then the Mux Player will allow you to further customize the player with options such as whether or not to enable DVR mode.

```astro
<MuxPlayer
  playbackId="FOTbeIxKeMPzyhrob722wytaTGI02Y3zbV00NeFQbTbK00"
  metadata={{
    video_title: 'Starlight stream with Astro',
  }}
  streamType="live:dvr"
/>

```

Every live stream is recorded and saved on Mux as a video on demand asset for future playback.

## Mux video Element 

The [Mux video element](https://www.mux.com/docs/guides/play-your-videos#mux-video-element) is a drop-in replacement for the HTML5 `<video>` element that provides browser support for HLS playback, and has Mux Data automatically configured to show visitor and performance metrics. Use this when you do not need or want all the features of [Mux Player](#mux-player).

Mux Video can be used as a web component (`<mux-video>`), or as a React component (`<MuxVideo />`). To use either component, install the appropriate package using your preferred package manager:

<Tabs>
<TabItem label="npm">
  ```shell
  npm install @mux/mux-video # or npm install @mux/mux-video-react
  ```
  </TabItem>
  <TabItem label="Yarn">
  ```shell
  yarn add @mux/mux-video # or yarn add @mux/mux-video-react
  ```
  </TabItem>
</Tabs>

You will need the `playback-id` for your video asset which can be found in your Mux dashboard or [retrieved from its `ASSET_ID`](#retrieving-asset-data). All attributes for the HTML 5 `<video>` element (e.g. `poster`, `controls`, `muted`) are available, as well as additional Mux video player controls (e.g. to provide metadata, control the resolution, disable cookies):

```astro title="src/components/StarlightVideo.astro"
<script>import '@mux/mux-video'</script>

<mux-video
  playback-id="FOTbeIxKeMPzyhrob722wytaTGI02Y3zbV00NeFQbTbK00"
  metadata-video-title="Starlight by Astro"
  controls
  disable-tracking
></mux-video>
```

## Mux Node SDK

The [Mux Node SDK](https://github.com/muxinc/mux-node-sdk) provides access to the Mux REST API from server-side TypeScript or JavaScript. This allows you to interact with your Mux assets and data in the component script of your `.astro` files.

### Installation

Install the Mux Node SDK using your preferred package manager:

<Tabs>
<TabItem label="npm">
  ```shell
  npm install @mux/mux-node@latest
  ```
  </TabItem>
  <TabItem label="Yarn">
  ```shell
  yarn add @mux/mux-node@latest
  ```
  </TabItem>
</Tabs>

### Mux Environment

A Mux Environment contains a group of videos for shared use and data analysis. You will need to create an Environment in your Mux dashboard, and then create ID and SECRET tokens to provide credentials to the Node SDK. This will allow you to create an instance of the Mux Node SDK for retrieving information about your videos, creating new assets, accessing metrics and real-time performance, and more:

```astro
---
import Mux from "@mux/mux-node";

const mux = new Mux ({
  tokenId: import.meta.env.MUX_TOKEN_ID,
  tokenSecret: import.meta.env.MUX_TOKEN_SECRET,
})
---
```

<ReadMore>Read more about using [environment variables](https://docs.astro.build/en/guides/environment-variables/) in your Astro project.</ReadMore>

### Retrieving asset data

To fetch information about your video to use in your Astro project, provide the video's `ASSET_ID` (available in the Mux dashboard) to the `retrieve()` helper function:

```astro
---
import Mux from "@mux/mux-node";
import MuxPlayer from "@mux/mux-player-astro";

const mux = new Mux ({
  tokenId: import.meta.env.MUX_TOKEN_ID,
  tokenSecret: import.meta.env.MUX_TOKEN_SECRET,
})

const ASSET_ID = "E01irAaN8c6dk1010153uC2mzst7RVbAdJJWtHECAHFvDo";
const asset = await mux.video.assets.retrieve(ASSET_ID);

const playbackId = asset.playback_ids?.find((id)=> id.policy=== "public")?.id;
const videoTitle = asset?.meta?.title;
const createdAt = Number(asset?.created_at);
const duration = Number(asset?.duration)

const date = new Date(createdAt * 1000).toDateString()
const time = new Date(Math.round(duration) * 1000).toISOString().substring(14, 19)
---
<h1>My Video Page</h1>
<p>Title: {videoTitle}</p>
<p>Upload Date: {date}</p>
<p>Length: {time}</p>

<MuxPlayer 
  playbackId={playbackId}
  videoTitle={videoTitle}
/>
```

See all asset properties in the [Mux Asset API documentation](https://www.mux.com/docs/api-reference/video/assets).

## Official Resources

For more information about additional topics, such as integrating with a CMS, building custom video workflows, and more, please see:

- [The official Mux documentation](https://www.mux.com/docs/integrations/astro).
- [Building a video uploader with Mux and Astro (YouTube)](https://www.youtube.com/watch?v=aaL1k5FsWfE)
- [Astro uploader and player code example (GitHub)](https://github.com/muxinc/examples/tree/main/astro-uploader-and-player)

